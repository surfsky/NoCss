const Anchor={TL:"topLeft",T:"top",TR:"topRight",L:"left",C:"center",CH:"centerH",R:"right",BL:"bottomLeft",B:"bottom",BR:"bottomRight",F:"fill"};class Color{r=0;g=0;b=0;a=0;constructor(t,e,r,s){this.r=t,this.g=e,this.b=r,this.a=s}}class Theme{constructor(t){this.name=t.name,this.text=t.text,this.textLight=t.textLight,this.background=t.background,this.link=t.link,this.linkHover=t.linkHover,this.linkVisited=t.linkVisited,this.primary=t.primary,this.secondary=t.secondary,this.success=t.success,this.info=t.info,this.warning=t.warning,this.danger=t.danger,this.dark=t.dark,this.light=t.light,this.border=t.border,this.radius=t.radius}static themeLight=new Theme({name:"iOSLight",text:"black",textLight:"white",background:"white",link:"blue",linkHover:"darkblue",linkVisited:"gray",primary:"#007bff",secondary:"#7633d4",success:"#28a745",info:"#17a2b8",warning:"#ffc107",danger:"#dc3545",dark:"#343a40",light:"#f8f9fa",radius:"8px"});static themeDark=new Theme({name:"MaterialDark",text:"#cccccc",textLight:"#f0f0f0",background:"#171717",link:"red",linkHover:"green",linkVisited:"gray",primary:"#007bff",secondary:"#7633d4",success:"#28a745",info:"#17a2b8",warning:"#ffc107",danger:"#dc3545",dark:"#343a40",light:"#f8f9fa",radius:"8px"});static current=Theme.themeLight;static setTheme(t){this.current=t,Array.from(document.querySelectorAll("*")).forEach(t=>{t instanceof HTMLElement&&(this.setBaseTheme(t),null!=t.setTheme)&&t.setTheme()}),document.dispatchEvent(new Event("themechanged"))}static setThemeCls(t,e){this.setBaseTheme(t,e),null!=t.setTheme&&t.setTheme()}static setBaseTheme(t,e=null){if(null!=(e=null==e?t.getAttribute("themeCls"):e)){var r=Theme.current;switch(t.style.transition="all 0.4s",t.style.color=r.text,e){case"bg":t.style.backgroundColor=r.background;break;case"primary":t.style.backgroundColor=r.primary;break;case"secondary":t.style.backgroundColor=r.secondary;break;case"success":t.style.backgroundColor=r.success;break;case"info":t.style.backgroundColor=r.info;break;case"warning":t.style.backgroundColor=r.warning;break;case"danger":t.style.backgroundColor=r.danger;break;default:t.style.backgroundColor=r.background}return t}}}class Utils{static iconRoot="../img/";static iconFontRoot="../iconfont/";static getIconUrl(t){return t.includes(".")?this.iconRoot+t:""+this.iconRoot+t+".png"}static log(t="",e="INFO",r="",s="[{date}] {level} : {message}"){""!=s&&(i=(i=new Date).toLocaleDateString()+" "+i.toLocaleTimeString(),t=s.replace("{date}",i).replace("{level}",e).replace("{message}",t));var s=document.createElement("div"),i=(s.innerHTML=t,s.style.display="block","WARN"==e&&(s.style.color="orange"),"ERROR"==e&&(s.style.color="red"),document.body);(i=""!=r?document.getElementById(r):i).appendChild(s)}static clearLog(t){var e=document.body;(e=""!=t?document.getElementById(t):e).innerHTML=""}static sleep(e){return new Promise(t=>setTimeout(t,e))}static sleepNap(t){for(;0<t;)t--}static toPromise(e){return new Promise(t=>{e(),t()})}static uuid(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}static htmlEncode(t){return t.replace(/[<>]/g,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;"}})}static htmlDecode(t){return t.replace("&lt;","<").replace("&gt;",">").replace("&amp;","&").replace("&quot;",'"').replace("&#39;","'")}static $(t){return document.querySelector(t)}static $$(t){return document.querySelectorAll(t)}static parseElement(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}static addLink(t){var e;this.isLinkExist(t)||((e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e))}static isLinkExist(e){var r=document.getElementsByTagName("link");for(let t=0;t<r.length;t++)if(r[t].getAttribute("href")===e)return!0;return!1}static get viewWidth(){return window.innerWidth||document.documentElement.clientWidth}static get viewHeight(){return window.innerHeight||document.documentElement.clientHeight}static centerlize(t){var t=document.querySelector(t),e=t.offsetWidth,r=t.offsetHeight;t.style.transtion="",t.style.left=(this.viewportWidth-e)/2+"px",t.style.top=(this.viewportHeight-r)/2+"px",t.style.display="block"}static calcPx(t,e=null){var r;return t.endsWith("px")?parseInt(t,10):t.endsWith("rem")?(r=parseInt(getComputedStyle(document.documentElement).fontSize,10),parseInt(t,10)*r):t.endsWith("em")?(r=parseInt(getComputedStyle(e.parentNode).fontSize,10),parseInt(t,10)*r):0}static calcBound(t){return t.getBoundingClientRect()}static calcStyle(t){return getComputedStyle(t)}static removeStyleTag(e){var r=document.getElementsByTagName("style");for(let t=0;t<r.length;t++){var s=r[t];s.textContent.includes(e)&&s.remove()}}static animate(t,e,r=null,s=.1,i="ease"){t.style.transition=`all ${s}s `+i,null!=r&&t.addEventListener("transitionend",()=>r(t),{once:!0}),requestAnimationFrame(()=>e(t))}static toBool(t){var e=typeof t;return"boolean"==e?t:"string"==e&&"true"==t.toLowerCase()}static getRandomColor(){return`rgb(${Math.floor(256*Math.random())},${Math.floor(256*Math.random())},${Math.floor(256*Math.random())})`}static getOpacityColor(t,e){t=this.parseColor(t);return null!=t?`rgba(${t.r}, ${t.g}, ${t.b}, ${e})`:"white"}static getLighterColor(t,e=.5){var r,s,t=this.parseColor(t);return t?(r=Math.min(255,Math.round(t.r+(255-t.r)*e)),s=Math.min(255,Math.round(t.g+(255-t.g)*e)),e=Math.min(255,Math.round(t.b+(255-t.b)*e)),t.hasOwnProperty("a")?`rgba(${r}, ${s}, ${e}, ${t.a})`:`rgb(${r}, ${s}, ${e})`):null}static getDarkerColor(t,e=.5){var r,s,t=this.parseColor(t);return t?(r=Math.max(0,Math.round(t.r*(1-e))),s=Math.max(0,Math.round(t.g*(1-e))),e=Math.max(0,Math.round(t.b*(1-e))),t.hasOwnProperty("a")?`rgba(${r}, ${s}, ${e}, ${t.a})`:`rgb(${r}, ${s}, ${e})`):null}static parseColor(t){if(""==(t=t.trim()))return null;let e;if(t.startsWith("#"))e=this.hexToRgb(t);else if(t.startsWith("rgb("))e=this.rgbFromRgbExpression(t);else{var r,s;if(!t.startsWith("rgba("))return(r=document.createElement("div")).style.color=t,document.body.appendChild(r),s=window.getComputedStyle(r).color,document.body.removeChild(r),this.parseColor(s);e=this.rgbaFromRgbaExpression(t)}return e}static hexToRgb(t){t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}static rgbFromRgbExpression(t){t=t.match(/\d+/g);return t?{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2])}:null}static rgbaFromRgbaExpression(t){t=t.match(/[\d.]+/g);return t?{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}:null}static getQueryStrings(t){t=t.split("?")[1];return t?t.split("&").reduce((t,e)=>{var[e,r]=e.split("=");return t[e]=decodeURIComponent(r),t},{}):{}}static async get(t){return this.ajax("GET",t)}static async post(t,e){return this.ajax("GET",t,e)}static async ajax(t,i,o=null){return new Promise((e,r)=>{const s=new XMLHttpRequest;s.open(t,i,!0),s.onreadystatechange=function(){var t;4===s.readyState&&(200===s.status?(t=s.responseText,e(t)):r(new Error("Failed to fetch the page.")))},s.send(o)})}}class NoCss{static registProperties(){["width","height","margin","padding","top","left","right","bottom","gridC","gridR","newClass","z","visible","box","radius","anchor","lineAnchor","fixAnchor","dock","childAnchor","childMargin","childPadding","themeCls","color","bg","bgColor","bgImage","bgRepeat","bgPosition","bgSize","shadow","transform","rotate","scale","skew","textShadow","hoverBgColor","hoverColor","events","click","draggable"].forEach(e=>{var r=this;HTMLElement.prototype.__defineGetter__(e,function(){return r.getCustomAttribute(this,e)}),HTMLElement.prototype.__defineSetter__(e,function(t){this.setAttribute(e,t),r.setCustomAttribute(this,e,t)})})}static{new MutationObserver((t,e)=>{for(const i of t){var r,s=i.target;"childList"==i.type?0<i.addedNodes.length&&i.addedNodes.forEach(t=>{t instanceof HTMLElement&&(t=this.renderCustomTag(t)),this.setCustomAttributes(t)}):"attributes"===i.type&&"style"!=(r=i.attributeName)&&"id"!=r&&this.setCustomAttribute(s,r,s.getAttribute(r))}}).observe(document,{attributes:!0,childList:!0,subtree:!0})}static customTags={};static registCustomTag(t,e){t=t.toLowerCase(),this.customTags[t]=e}static renderCustomTag(t){var e=this.getCustomTag(t);return t=null!=e?e.render(t):t}static getCustomTag(t){t=t.tagName.toLowerCase();return this.customTags[t]}static getCustomAttribute(t,e){var r=this.styleNames.find(t=>t.toLowerCase()===e);return null!=r?t.style[r]:t.getAttribute(e)}static setCustomAttributes(r){null!=r&&(r.getAttributeNames&&!r.hasSetAttributes&&r.getAttributeNames().forEach(t=>{var e=r.getAttribute(t);null!=e&&this.setCustomAttribute(r,t,e)}),r.hasSetAttributes=!0)}static styleNames=Object.keys(document.createElement("div").style);static setCustomAttribute(e,r,s){switch(this.styleNames.forEach(t=>{t.toLowerCase()==r&&(e.style[t]=s)}),r.toLowerCase()){case"z":e.style.zIndex=s;break;case"radius":e.style.borderRadius=s;break;case"box":e.style.boxSizing=s;break;case"bg":e.style.background=s;break;case"bgcolor":e.style.backgroundColor=s;break;case"bgimage":e.style.backgroundImage=`url('${s}')`;break;case"bgrepeat":e.style.backgroundRepeat=s;break;case"bgposition":e.style.backgroundPosition=s;break;case"bgsize":e.style.backgroundSize=s;break;case"events":e.style.pointerEvents=s;break;case"gridc":this.setGridColumn(e,s);break;case"gridr":this.setGridRow(e,s);break;case"newclass":e.classList.add(s);break;case"visible":this.setVisible(e,s);break;case"anchor":this.setAnchor(e,s,"absolute");break;case"fixanchor":this.setAnchor(e,s,"fixed");break;case"dock":this.setDock(e,s,"absolute");break;case"lineanchor":this.setLineAnchor(e,s);break;case"childanchor":this.setChildAnchor(e,s);break;case"childmargin":this.setChildStyle(e,"margin",s);break;case"childpadding":this.setChildStyle(e,"padding",s);break;case"themecls":Theme.setThemeCls(e,s);break;case"shadow":this.setShadow(e,s);break;case"textshadow":this.setTextShadow(e,s);break;case"rotate":e.style.transform=`rotate(${s}deg)`;break;case"skew":e.style.transform=`skew(${s}deg)`;break;case"scale":e.style.transform=`scale(${s})`;break;case"hoverbgcolor":this.setHoverBgColor(e,s);break;case"hovercolor":this.setHoverTextColor(e,s);break;case"click":this.setClick(e,s);break;case"draggable":e.setAttribute("draggable",s)}}static getPropertyNames(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e);return r}static getId(t){var e=t.id;return e=""==e?null!=(t=t.getAttribute("id"))?t:Utils.uuid():e}static uuid(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}static saveStyle(t){var e;null!=t.styleTag&&(t.id=this.getId(t),e=t.id+"-style",t.styleTag.id=e,null==(e=document.getElementById(e))?document.head.appendChild(t.styleTag):e.textContent=t.styleTag.textContent)}static setChildStyle(t,e,r){t.id=this.getId(t),null==t.styleTag&&(t.styleTag=document.createElement("style")),t.styleTag.textContent=`#${t.id} > *  {${e}: ${r} }`,this.saveStyle(t)}static setAnchor(t,e,r="absolute"){var s=t.style;switch(e){case Anchor.TL:s.position=r,s.top="0px",s.left="0px";break;case Anchor.T:s.position=r,s.top="0px",s.left="50%",s.transform="translateX(-50%)";break;case Anchor.TR:s.position=r,s.top="0px",s.right="0px";break;case Anchor.BL:s.position=r,s.bottom="0px",s.left="0px";break;case Anchor.B:s.position=r,s.bottom="0px",s.left="50%",s.transform="translateX(-50%)";break;case Anchor.BR:s.position=r,s.bottom="0px",s.right="0px";break;case Anchor.L:s.position=r,s.top="50%",s.left="0px",s.transform="translateY(-50%)";break;case Anchor.C:s.position=r,s.top="50%",s.left="50%",s.transform="translate3D(-50%, -50%, 0)";break;case Anchor.R:s.position=r,s.top="50%",s.right="0px",s.transform="translateY(-50%)";break;case Anchor.F:s.position=r,s.top="0",s.right="0",s.bottom="0",s.left="0",s.width="100%",s.height="100%"}return t}static setLineAnchor(t,e){var r=t.style;switch(r.display="block",e){case Anchor.L:r.width="400px",r.marginLeft=0;break;case Anchor.C:r.width="400px",r.margin="0 auto";break;case Anchor.R:r.width="400px",r.marginLeft="auto",r.marginRight=0}return t}static setChildAnchor(t,e){var r=t.style;if(null==e||""==e)r.display="",r.flexDirection="",r.justifyContent="",r.alignItems="";else switch(r.display="flex",e){case Anchor.TL:r.flexDirection="row",r.justifyContent="flex-start",r.alignItems="flex-start";break;case Anchor.T:r.flexDirection="row",r.justifyContent="center",r.alignItems="flex-start";break;case Anchor.TR:r.flexDirection="row",r.justifyContent="flex-end",r.alignItems="flex-start";break;case Anchor.L:r.flexDirection="row",r.justifyContent="flex-start",r.alignItems="center";break;case Anchor.C:r.flexDirection="column",r.justifyContent="center",r.alignItems="center";break;case Anchor.CH:r.flexDirection="row",r.justifyContent="center",r.alignItems="center";break;case Anchor.R:r.flexDirection="row",r.justifyContent="flex-end",r.alignItems="center";break;case Anchor.BL:r.flexDirection="row",r.justifyContent="flex-start",r.alignItems="flex-end";break;case Anchor.B:r.flexDirection="row",r.justifyContent="center",r.alignItems="flex-end";break;case Anchor.BR:r.flexDirection="row",r.justifyContent="flex-end",r.alignItems="flex-end";break;case Anchor.F:this.setChildFill()}return t}static setChildFill(t){t.style.display="flex",t.id=this.getId(t),null==t.styleTag&&(t.styleTag=document.createElement("style")),t.styleTag.textContent=`#${t.id} > * { flex: 1}`,this.saveStyle(t)}static setDock(t,e,r="absolute"){var s=t.style;switch(e){case Anchor.T:s.position=r,s.width="",s.top="0",s.left="0",s.right="0";break;case Anchor.B:s.position=r,s.width="",s.bottom="0",s.left="0",s.right="0";break;case Anchor.L:s.position=r,s.height="",s.top="0",s.bottom="0",s.left="0";break;case Anchor.R:s.position=r,s.height="",s.top="0",s.bottom="0",s.right="0";break;case Anchor.F:s.position=r,s.width="",s.height="",s.top="0",s.bottom="0",s.left="0",s.right="0"}return this}static setShadow(t,e){return t.style.boxShadow="true"==e||1==e?"5px 5px 10px lightgray":"false"==e||0==e?"":e,t}static setTextShadow(t,e){return t.style.textShadow="true"==e||1==e?"5px 5px 10px black":"false"==e||0==e?"":e,t}static setHoverBgColor(t,e){var r=t.style.backgroundColor,s=t.style.cursor;return t.addEventListener("mouseover",()=>{t.style.backgroundColor=e,t.style.cursor="pointer"}),t.addEventListener("mouseout",()=>{t.style.backgroundColor=r,t.style.cursor=s}),t}static setHoverTextColor(t,e){var r=t,s=r.style.color,i=r.style.cursor;return r.addEventListener("mouseover",function(){r.style.color=e,r.style.cursor="pointer"}),r.addEventListener("mouseout",function(){r.style.color=s,r.style.cursor=i}),t}static setHoverOpacity(t,e){var r=t,s=r.style.opacity,i=r.style.cursor;return r.addEventListener("mouseover",function(){r.style.opacity=e,r.style.cursor="pointer"}),r.addEventListener("mouseout",function(){r.style.opacity=s,r.style.cursor=i}),t}static setVisible(t,e){return t.style.visibility="true"==e||1==e?"visible":"hidden",t}static setEnable(t,e){return e?(t.disabled=!1,t.style.pointerEvents="",t.style.filter=""):(t.disabled=!0,t.style.pointerEvents="none",t.style.filter="grayscale(100%)"),t}static setClick(ele,func){return ele.addEventListener("click",e=>{e.stopPropagation(),eval(func)}),ele}static setGridColumn(t,e){var r;return-1!=e.indexOf("-")?(r=e.split("-"),t.style.gridColumnStart=r[0],t.style.gridColumnEnd=parseInt(r[1])+1):t.style.gridColumn=e,t}static setGridRow(t,e){var r;return-1!=e.indexOf("-")?(r=e.split("-"),t.style.gridRowStart=r[0],t.style.gridRowEnd=parseInt(r[1])+1):t.style.gridRow=e,t}}class Tag{render(t){return t.style.transition="all 0.4s",t}}class Rect extends Tag{static{NoCss.registCustomTag("Rect",new Rect)}render(t){return super.render(t),t.style.width="100px",t.style.height="100px",t.style.border="1px solid #a0a0a0",t.style.boxSizing="border-box",t.style.overflow="hidden",""!=t.innerHTML&&NoCss.setChildAnchor(t,"center"),t}}class Circle extends Tag{static{NoCss.registCustomTag("Circle",new Circle)}render(t){t.style.border="1px solid #a0a0a0",t.style.boxSizing="border-box",t.style.overflow="hidden";var e=t.getAttribute("width");return null!=e&&(t.style.height=e,t.style.borderRadius="50%"),""!=t.innerHTML&&NoCss.setChildAnchor(t,"center"),t}}class Row extends Tag{static{NoCss.registCustomTag("Row",new Row)}render(t){t.style.boxSizing="border-box",t.style.width="100%",t.style.height="100px",t.style.display="flex",t.style.flexDirection="row";var e=t.getAttribute("gap");return null!=e&&NoCss.setChildStyle(t,"margin",`0 ${e} 0 0`),t}}class Column extends Tag{static{NoCss.registCustomTag("Column",new Column)}render(t){t.style.boxSizing="border-box",t.style.width="100px",t.style.height="100%",t.style.display="flex",t.style.flexDirection="column";var e=t.getAttribute("gap");return null!=e&&NoCss.setChildStyle(t,"margin",`0 0 ${e} 0`),t}}class Grid extends Tag{static{NoCss.registCustomTag("Grid",new Grid)}render(t){t.style.boxSizing="border-box",t.style.display="grid",t.style.gap="10px",this.setColumns(t,4);var e=t.getAttribute("gap"),e=(null!=e&&(t.style.gap=e),t.getAttribute("columns")),e=(null!=e&&this.setColumns(t,e),t.getAttribute("columnsSmall")),e=(null!=e&&this.setScreenColumns(t,e,"800px"),t.getAttribute("rows")),e=(null!=e&&this.setRows(t,e),t.getAttribute("minColumn"));return null!=e&&this.setAutoColumn(t,e),t}isNumberString(t){t=Number(t);return!isNaN(t)}setAutoColumn(t,e="100px"){t.style.gridTemplateColumns=`repeat(auto-fit, minmax(${e}, 1fr))`}setColumns(t,e){this.isNumberString(e)?t.style.gridTemplateColumns=`repeat(${e}, 1fr)`:t.style.gridTemplateColumns=e}setScreenColumns(t,e,r="800px"){var s=e,e=(this.isNumberString(e)&&(s=`repeat(${e}, 1fr)`),t.id=NoCss.getId(t),document.createElement("style"));e.id=t.id+"-style",e.textContent=`
            @media screen and (max-width: ${r}) { 
                #${t.id} { grid-template-columns: ${s} !important; }
            }
        `,t.styleTag=e,NoCss.saveStyle(t)}setRows(t,e){this.isNumberString(e)?t.style.gridTemplateRows=`repeat(${e}, 1fr)`:t.style.gridTemplateRows=e}}class Form extends Tag{static{NoCss.registCustomTag("Form",new Form)}render(t){t.classList.add("gridForm"),t.id=NoCss.getId(t);var e=t.getAttribute("gap");return null!=e&&(t.style.gap=e),t.styleTag=this.createStyle(t),NoCss.saveStyle(t),t}createStyle(t){t.id;t=document.createElement("style");return t.textContent=`
            /* Responsive form grid container to display 1-4 columns*/
            .gridForm {
                display: grid;
                gap: 10px;
                padding: 10px;
            }
            @media (min-width: 400px)  {.gridForm { grid-template-columns: auto; }}
            @media (min-width: 800px)  {.gridForm { grid-template-columns: 100px auto; }}
            @media (min-width: 1000px) {.gridForm { grid-template-columns: 100px auto 100px auto; }}
            @media (min-width: 1200px) {.gridForm { grid-template-columns: 100px auto 100px auto 100px auto 100px auto;}}
            @media (min-width: 1400px) {.gridForm { grid-template-columns: 100px auto 100px auto 100px auto 100px auto 100px auto 100px auto;}}
            .gridForm > * {text-align: left; height: 30px;}
            .gridForm > label {padding-top: 0px;}
            .gridForm > input {border-radius: 4px; border: 1px solid gray;}
        `,t}}class Container extends Tag{static{NoCss.registCustomTag("Container",new Container)}render(t){return t.id=NoCss.getId(t),t.style.display="block",t.style.transition="all 0.5s",t.styleTag=this.createStyle(t),NoCss.saveStyle(t),t}createStyle(t){var t=t.id,e=document.createElement("style");return e.textContent=`
            #${t} {
                width: 100%;
                margin-left: auto;
                margin-right: auto;
                padding-left: 15px;
                padding-right: 15px;
            }

            /* Responsive container 540-720-960-1140 */
            @media (min-width: 576px)  { #${t}   {max-width: 540px;}}  /*xs*/
            @media (min-width: 768px)  { #${t}   {max-width: 720px;}}  /*s*/
            @media (min-width: 992px)  { #${t}   {max-width: 960px;}}  /*m*/
            @media (min-width: 1200px) { #${t}   {max-width: 1140px;}} /*l*/
            @media (min-width: 1500px) { #${t}   {max-width: 1400px;}} /*xl*/
            @media (min-width: 1800px) { #${t}   {max-width: 1700px;}} /*xxl*/
            @media (min-width: 2000px) { #${t}   {max-width: 1900px;}} /*xxxl*/
        `,e}}class Button extends Tag{static{NoCss.registCustomTag("Button",new Button)}render(r){r.style.boxSizing="border-box",r.style.transition="all 0.5s",r.style.padding="10px",r.style.overflow="hidden",r.style.borderRadius="8px",r.style.borderWidth="0px",r.style.height="44px",r.style.width="120px",r.style.userSelect="none",r.style.textAlign="center",NoCss.setHoverOpacity(r,"0.8");var t,e=r.getAttribute("icon"),e=(null!=e&&((t=document.createElement("icon")).setAttribute("key",e),t.style.color=Theme.current.textLight,t.style.fontSize="20px",t.style.marginRight="6px",r.insertBefore(t,r.firstChild)),r.getAttribute("asyncClick"));return null!=e&&this.setClick(r,e,!0),null==r.getAttribute("themeCls")&&r.setAttribute("themeCls","primary"),r.setTheme=function(){var t,e=Theme.current;r.style.borderRadius=e.radius,r.style.color=e.textLight,null==e.border||""==e.border?(t=Utils.getDarkerColor(r.style.backgroundColor,.2),r.style.border="1px solid "+t):r.style.border=e.border},r.setTheme(),r}setClick(ele,func,isAsync=!1){isAsync?ele.addEventListener("click",async e=>{e.stopPropagation(),NoCss.setEnable(ele,!1),"string"==typeof func?await eval(`(async () => {${func}})()`):await func(),NoCss.setEnable(ele,!0)}):ele.addEventListener("click",e=>{e.stopPropagation(),"string"==typeof func?eval(func):func()})}}class Mask{static async show(t=99){null==this.overlay&&(this.overlay=document.createElement("div"),this.overlay.style.position="fixed",this.overlay.style.top=0,this.overlay.style.left=0,this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.display="none",this.overlay.style.transition="all 0.5s",this.overlay.style.zIndex=t,document.body.appendChild(this.overlay)),this.overlay.style.display="block",await Utils.sleep(50),this.overlay.style.backgroundColor="rgba(0, 0, 0, 0.3)"}static async hide(){null!=this.overlay&&(this.overlay.style.backgroundColor="rgba(0, 0, 0, 0.0)",await Utils.sleep(500),this.overlay.style.display="none",document.body.removeChild(this.overlay),this.overlay=null)}}class Toast{static counter=0;static async show(t,e="white-bulb",r="400px",s="38px"){var i=Utils.uuid(),r=`
            <rect id='${i}' box='border-box' fixanchor='top' top='-100px' childanchor='centerH'
              width='${r}' height='${s}' radius='6px'  border='0'
              bgcolor='${Theme.current.success}' color='${Theme.current.light}' opacity='0.8'>
                <img src='${Utils.getIconUrl(e)}' width='20px' height='20px'/>&nbsp;
                <div>${t}<div>
            </rect>
        `,e=Utils.parseElement(r),t=(document.body.appendChild(e),this.counter++,s.match(/(\d+(?:\.\d+)?)(px|rem|em|%)/)),r=t?parseFloat(t[1]):38,e=t?t[2]:"px",s=25+(this.counter-1)*(r+10)+e,t=Utils.$("#"+i);await Utils.sleep(50),t.style.top=s,await Utils.sleep(2e3),t.style.top="-100px",await Utils.sleep(1e3),document.body.removeChild(t),this.counter--}}class Tooltip{static bind(t,r=null){document.querySelectorAll(t).forEach(t=>{var e=null==t.root?t:t.root;e.addEventListener("mouseover",()=>Tooltip.show(t,r)),e.addEventListener("mouseout",()=>Tooltip.hide())})}static show(t,e){var r="";null!=(r=null==e?t.textContent:"function"==typeof e?e(t):this.getVal(t,e))&&""!=r&&((e=document.createElement("div")).id="tooltip",e.innerHTML=r,e.style.display="block",e.style.position="fixed",e.style.backgroundColor="white",e.style.border="1px solid #ccc",e.style.borderRadius="4px",e.style.padding="5px",e.style.zIndex="999",r=t.getBoundingClientRect(),e.style.left=r.left+"px",e.style.top=r.bottom+4+"px",document.body.appendChild(e))}static hide(){var t=document.getElementById("tooltip");null!=t&&document.body.removeChild(t)}static getVal(t,e){var r;let s=t;for(r of e.split("."))if(void 0===(s=s[r]))return;return s}}class Image extends Tag{static{NoCss.registCustomTag("Img",new Image)}render(t){t.style.boxSizing="border-box";var e=t.getAttribute("icon");return null!=e&&(t.src=""+Utils.getIconUrl(e)),null!=t.getAttribute("avatar")&&(t.style.height=t.style.width,t.style.backgroundColor="white",t.style.padding="5px",t.style.border="1px solid #a0a0a0",t.style.borderRadius="50%"),t}}class Icon extends Tag{static{NoCss.registCustomTag("Icon",new Icon)}render(t){return t.style.display="inline-block",t.style.transition="all 0.5s",t.classList.add("icon","iconfont"),t.classList.add("icon-"+t.getAttribute("key")),Utils.addLink(Utils.iconFontRoot+"iconfont.css"),t}}class IconAwesome extends Tag{static{NoCss.registCustomTag("Icona",new IconAwesome)}render(t){return t.style.display="inline-block",t.style.transition="all 0.5s",t.classList.add("fa-"+t.getAttribute("key")),t.classList.add("fa-"+t.getAttribute("type")),Utils.addLink("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"),t}}class GlobalStyle extends Tag{static{NoCss.registCustomTag("GlobalStyle",new GlobalStyle)}render(t){var e=t.getAttribute("box")||"border-box",r=t.getAttribute("transition")||"0.5s",s=t.getAttribute("linkColor")||"blue",i=t.getAttribute("linkHoverColor")||"green",o=t.getAttribute("linkVisitColor")||"purple",a=t.getAttribute("fullScreen")||"true",n=t.getAttribute("rem")||"16px",l=document.createElement("style");return l.id="global",l.textContent=`
            /* for all elements */
            *, *::before, *::after {
                box-sizing: ${e};
                transition: ${r};
            }

            /* link */
            a, a:hover, a:visited { text-decoration: none; }
            a         {color: ${s}}
            a:hover   {color: ${i}}
            a:visited {color: ${o}}

            /* list */
            ul, li    {list-style-type: none;}

            /* rem */
            html { font-size : ${n} }
        `,"true"==a&&(l.textContent=l.textContent+`
            /* fullscreen */
            html,body {
                width: 100%;  height: 100%;
                padding: 0px; margin: 0px;
            }
        `),l.textContent=l.textContent+t.innerText,document.head.appendChild(l),t}}class Panel extends Column{static{NoCss.registCustomTag("Panel",new Panel)}render(e){super.render(e),NoCss.setCustomAttributes(e),e.id=NoCss.getId(e),e.style.overflow="hidden";var t,r,s,i,o,a,n,l,c,d,u=e.id+"-title",h=e.id+"-body",g=e.getAttribute("height")||"400px",m=e.getAttribute("borderColor")||"#a0a0a0";return Utils.toBool(e.getAttribute("titleVisible")||!0)?(t=e.getAttribute("radius")||"0",r=e.getAttribute("radius")||"0",s=e.getAttribute("title")||"Title",d=e.getAttribute("titleHeight")||"40px",i=e.getAttribute("titleBgColor")||"lightBlue",o=e.getAttribute("titleColor")||"black",a=Utils.getDarkerColor(i),n=e.getAttribute("minHeight")||d,e.innerHTML=`
                <div id="${u}" width="100%" height="${d}" 
                    borderBottom="1px solid ${m}" 
                    color='${o}'
                    bgColor="${i}" hoverBgColor="${a}"
                    radiusTopLeft='${t}'
                    radiusTopRight='${r}'
                    childAnchor='center'
                    >
                    ${s}
                </div>
                <div id='${h}'  width="100%" flex='1' childAnchor='center' overflow='hidden'>
                    ${e.innerHTML}
                </div>
            `,l="expanded",Object.defineProperty(e,l,{get:function(){return Utils.toBool(e.getAttribute(l))},set:function(t){t=Utils.toBool(t);this.setAttribute(l,t),e.style.height=t?g:n}}),e.expanded=Utils.toBool(e.getAttribute("expanded")||!0),c=document.getElementById(e.id),(d=document.getElementById(u))&&d.addEventListener("click",()=>c.expanded=!c.expanded)):e.innerHTML=`
                <div id='${h}'  width="100%" flex='1' childAnchor='center' overflow='hidden'>
                    ${e.innerHTML}
                </div>
            `,e}}class Switcher extends Row{static{NoCss.registCustomTag("Switcher",new Switcher)}render(e){super.render(e),NoCss.setCustomAttributes(e),e.id=NoCss.getId(e);var t=e.getAttribute("width")||"100px",r=e.getAttribute("height")||"40px",s=e.getAttribute("radius")||"20px",i=e.getAttribute("border")||"1px solid #a0a0a0",o=e.getAttribute("trueText")||"ON",a=e.getAttribute("falseText")||"OFF",n=Utils.toBool(e.getAttribute("checked")||"false"),l=Theme.current.primary,c=Utils.calcPx(r);return e.style.width=t,e.style.height=r,e.style.borderRadius=s,e.style.border=i,e.innerHTML=`
            <circle id='${e.id}-circle' width="${c-2}px"  border="2px solid white"></circle>
            <div    id='${e.id}-text'   height="${c}px"   flex="1" childAnchor="center">${o}</div>
        `,e.addEventListener("click",()=>{var t=e.checked||!1;setChecked(e,!t,l,o,a)}),this.setChecked(e,n,l,o,a),e}setChecked(t,e,r,s="ON",i="OFF"){var o=document.getElementById(t.id+"-circle"),a=document.getElementById(t.id+"-text");t.checked=e,t.style.backgroundColor=e?r:"white",o.style.order=e?2:1,o.style.borderColor=e?r:"white",o.style.backgroundColor=e?"white":r,a.style.order=e?1:2,a.style.color=e?"white":r,a.innerText=e?s:i}}